<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.css" rel="stylesheet" />
		<style type="text/css">
			.mui-bar {
				background: #04B1E9;
			}

			.mui-bar a,
			.mui-bar h1 {
				color: #fff;
			}

			.mui-table-view-cell:after {
				left: 0;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">报警信息列表</h1>
		</header>
		<div class="mui-content">
			<div class="mui-card" style="box-shadow:none;margin: 0px;font-size: 1.125rem;">
				<ul class="mui-table-view" style="background:#efeff4;" id="List">
				</ul>
			</div>
		</div>
		<script src="js/mui.js"></script>
		<script src="js/jquery.min.js" type="text/javascript"></script>
		<script>
			mui.init();
			mui.plusReady(function() {
				var self = plus.webview.currentWebview();
				var stationId = self.stationId;
				mui.ajax('http://www.hyfuncloud.cn/api/alarm/queryListByStation', {
					data: {
						stationId: stationId
					},
					dataType: 'json', //服务器返回json格式数据
					type: 'post', //HTTP请求类型
					timeout: 10000, //超时时间设置为10秒；
					success: function(result) {
						var str = '';
						if (result.data.length > 0) {
							for (var i = 0; i < result.data.length; i++) {
								var remarks = '暂无描述';
								if (result.data[i].remarks != null) {
									remarks = result.data[i].remarks;
								}
								str += '<li class="mui-table-view-cell mui-collapse mui-active" style="margin-top:5px;background:#fff;">' +
									'	<a class="mui-navigate-right" href="#">' + (i + 1) + ' . ' + result.data[i].signalname +
									'</a>' +
									'	<div class="mui-collapse-content" style="border-top:1px soild #ccc;">' +
									'		<div class="mui-row">' +
									'			<span style="color:#999999">报警描述:</span>' +
									'			<span style="color: red;">' + remarks + '</span>' +
									'		</div>' +
									'		<div class="mui-row">' +
									'			<span style="color:#999999">开始时间:</span>' +
									'			<span>' + result.data[i].begin + '</span>' +
									'		</div>' +
									'		<div class="mui-row">' +
									'			<span style="color:#999999">结束时间:</span>' +
									'			<span>' + result.data[i].end + '</span>' +
									'		</div>' +
									'	</div>' +
									'</li>';

							}
							$('#List').html(str);
						}
					},
					error: function(xhr, type, errorThrown) {
						
					}
				});
			})
		</script>
	</body>

</html>
